<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Barcode Example</title>
    <!-- <script src="html5plus://ready"></script> -->
    <script src="./mui.js"></script>
    <script type="text/javascript">
        mui.plusReady(function() {
            alert('支持plus')
            var i = plus.webview.getWebviewById('txffc');
            console.log(i);
        });

        var ws = null,
            wo = null;

        var scan = null,
            domready = false;

        function plusReady() {
            alert('支持plus')
            if (ws || !window.plus || !domready) {

                return;

            }

            // 获取窗口对象   

            ws = plus.webview.currentWebview();

            wo = ws.opener();

            // 开始扫描   

            ws.addEventListener('show', function() {

                scan = new plus.barcode.Barcode('bcid');

                scan.onmarked = onmarked;

                scan.start({
                    conserve: true,
                    filename: '_doc/barcode/'
                });

            }, false);

            // 显示页面并关闭等待框   

            ws.show('pop-in');

        }

        if (window.plus) {

            plusReady();

        } else {
            console.log('....')
            document.addEventListener('plusready', plusReady, false);

        }
    </script>
    <style type="text/css">
        * {
            -webkit-user-select: none;
        }
        
        html,
        body {
            margin: 0px;
            padding: 0px;
            height: 100%;
        }
        
        #bcid {
            background: #0F0;
            height: 480px;
            width: 360px;
        }
    </style>
</head>

<body>
    <input type='button' id="scan" onclick='startRecognize()' value='创建扫码控件' />
    <input type='button' onclick='startScan()' value='开始扫码' />
    <div id="bcid"></div>
    <input type='text' id='text' />
</body>

</html>